import{_ as g,r as m,o,c as a,a as t,F as b,e as f,n as k,t as l,b as I,w as y,d as c,f as v,g as P}from"./index-5ca1608b.js";const{VITE_API:h,VITE_APIPATH:u}={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_APIPATH:"mandyapi",BASE_URL:"/hex-vue3-mainWork6/",MODE:"production",DEV:!1,PROD:!0},V={data(){return{products:[],cart:{},loadingId:"",isButton:!1}},methods:{getProducts(){const n=this.$loading.show();this.$http.get(`${h}/api/${u}/products/all`).then(s=>{this.products=s.data.products,n.hide()}).catch(s=>{alert(s.response.data.message)})},addCart(n,s=1){this.loadingId=n,this.isButton=!0;const d={product_id:n,qty:s};this.$http.post(`${h}/api/${u}/cart`,{data:d}).then(i=>{this.loadingId="",alert(i.data.message),this.isButton=!1}).catch(i=>{alert(i.response.data.message)})}},mounted(){this.getProducts()}},$={class:"table align-middle"},x=t("thead",null,[t("tr",null,[t("th",null,"圖片"),t("th",null,"商品名稱"),t("th",null,"價格"),t("th")])],-1),B={style:{width:"200px"}},C={key:0,class:"h5"},E={key:1},A={class:"h6"},T={class:"h5"},w={class:"btn-group btn-group-sm"},D=["onClick"],N={key:0,class:"fas fa-spinner fa-pulse"};function z(n,s,d,i,r,_){const p=m("router-link");return o(),a("table",$,[x,t("tbody",null,[(o(!0),a(b,null,f(r.products,e=>(o(),a("tr",{key:e.id},[t("td",B,[t("div",{style:k([{height:"100px","background-size":"cover","background-position":"center"},{backgroundImage:`url(${e.imageUrl})`}])},null,4)]),t("td",null,l(e.title),1),t("td",null,[e.price===e.origin_price?(o(),a("div",C,l(e.price)+" 元",1)):(o(),a("div",E,[t("del",A,"原價 "+l(e.origin_price)+" 元",1),t("div",T,"現在只要 "+l(e.price)+" 元",1)]))]),t("td",null,[t("div",w,[I(p,{to:`/product/${e.id}`,class:"btn btn-outline-secondary"},{default:y(()=>[c("查看更多")]),_:2},1032,["to"]),t("button",{type:"button",class:v(["btn btn-outline-danger",{disabled:r.isButton}]),onClick:S=>_.addCart(e.id)},[r.loadingId===e.id?(o(),a("i",N)):P("",!0),c(" 加到購物車 ")],10,D)])])]))),128))])])}const H=g(V,[["render",z]]);export{H as default};
